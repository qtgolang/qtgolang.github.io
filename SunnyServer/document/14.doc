.版本 2

.子程序 __启动窗口_创建完毕

' 连接sqlite数据库， 文件为当前目录test.db
' mysql为全局变量【SunnySQL】类型
.如果真 (SQL.连接Sqlite3 (“./test.db”) ＝ 假)
    信息框 (“连接数据库失败”, #错误图标, , )
    结束 ()
.如果真结束

' Sunny服务器套件 在模块中 已是全局变量 ,导入模块 可直接使用
Sunny服务器套件.添加GET路由 (“/test”, 到整数 (&路由函数))
Sunny服务器套件.启动HTTP服务器 (“:80”)

.子程序 路由函数
.参数 Context
.局部变量 SUNNY, Sunny
.局部变量 请求, Sunny请求
.局部变量 响应, Sunny响应
.局部变量 res, SQL结果

' 必须使用该语句取回sunny对象
SUNNY ＝ 取回sunny对象 (Context, 请求, 响应)

' 使用查询语句 获取查询结果
' res为查询结果
' 执行失败 或 无查询结果 返回假
.如果真 (SQL.查询 (“select * from test ”, res))

    .循环判断首 ()

        调试输出 (res.取文本 (“id”))

        ' res.Next () 到下一行记录 若无下一行 返回假
    .循环判断尾 (res.Next ())

.如果真结束
res.释放查询结果 ()  ' 请更新到2022-04-17模块
' 注意，查询完毕后，必须释放查询结果，否则执行更新语句,可能出现【database is locked】 错误

响应.写出文本 (200, “OK”)

.子程序 __启动窗口_将被销毁

SQL.断开 ()