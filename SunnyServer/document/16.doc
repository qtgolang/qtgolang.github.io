.版本 2
.支持库 spec

.子程序 __启动窗口_创建完毕

' Sunny服务器套件 在模块中 已是全局变量 ,导入模块 可直接使用


' 多个 标签使用 “|”分割
Sunny服务器套件.添加全局函数 (到整数 (&全局1), “标签1|标签2”)
' 上方全局函数  /test1 /test2 /test4 会执行

Sunny服务器套件.添加全局函数 (到整数 (&全局2), “标签2”)
' 上方全局函数 /test2 会执行

Sunny服务器套件.添加全局函数 (到整数 (&全局3))
' 上方全局函数 所有请求都会执行

Sunny服务器套件.添加GET路由 (“/test1”, 到整数 (&函数1), “标签1”)
Sunny服务器套件.添加GET路由 (“/test2”, 到整数 (&函数2), “标签2”)
Sunny服务器套件.添加GET路由 (“/test3”, 到整数 (&函数3), “标签3”)
Sunny服务器套件.添加GET路由 (“/test4”, 到整数 (&函数4), “标签1|标签2”)
调试输出 (Sunny服务器套件.启动HTTP服务器 (“:80”))

' 若访问 http://127.0.0.1/test1
' 将得到返回
' 全局1
' 全局3
' 函数1
' ==================================================
' 若访问 http://127.0.0.1/test2
' 将得到返回
' 全局1
' 全局2
' 全局3
' 函数2
' ==================================================
' 若访问 http://127.0.0.1/test3
' 将得到返回
' 全局3
' 函数3
' ==================================================
' 若访问 http://127.0.0.1/test4
' 将得到返回
' 全局1
' 全局2
' 全局3
' 函数4
' ==================================================


.子程序 全局3
.参数 Context, 整数型
.局部变量 SUNNY, Sunny
.局部变量 请求, Sunny请求
.局部变量 响应, Sunny响应

SUNNY ＝ 取回sunny对象 (Context, 请求, 响应)
SUNNY.响应.写出文本 (200, “全局3” ＋ #换行符)

.子程序 全局1
.参数 Context, 整数型
.局部变量 SUNNY, Sunny
.局部变量 请求, Sunny请求
.局部变量 响应, Sunny响应

SUNNY ＝ 取回sunny对象 (Context, 请求, 响应)
SUNNY.响应.写出文本 (200, “全局1” ＋ #换行符)

.子程序 全局2
.参数 Context, 整数型
.局部变量 SUNNY, Sunny
.局部变量 请求, Sunny请求
.局部变量 响应, Sunny响应

SUNNY ＝ 取回sunny对象 (Context, 请求, 响应)
SUNNY.响应.写出文本 (200, “全局2” ＋ #换行符)

.子程序 函数1
.参数 Context, 整数型
.局部变量 SUNNY, Sunny
.局部变量 请求, Sunny请求
.局部变量 响应, Sunny响应

SUNNY ＝ 取回sunny对象 (Context, 请求, 响应)
SUNNY.响应.写出文本 (200, “函数1” ＋ #换行符)

.子程序 函数2
.参数 Context, 整数型
.局部变量 SUNNY, Sunny
.局部变量 请求, Sunny请求
.局部变量 响应, Sunny响应

SUNNY ＝ 取回sunny对象 (Context, 请求, 响应)
SUNNY.响应.写出文本 (200, “函数2” ＋ #换行符)

.子程序 函数3
.参数 Context, 整数型
.局部变量 SUNNY, Sunny
.局部变量 请求, Sunny请求
.局部变量 响应, Sunny响应

SUNNY ＝ 取回sunny对象 (Context, 请求, 响应)
SUNNY.响应.写出文本 (200, “函数3” ＋ #换行符)


.子程序 函数4
.参数 Context, 整数型
.局部变量 SUNNY, Sunny
.局部变量 请求, Sunny请求
.局部变量 响应, Sunny响应

SUNNY ＝ 取回sunny对象 (Context, 请求, 响应)
SUNNY.响应.写出文本 (200, “函数4” ＋ #换行符)