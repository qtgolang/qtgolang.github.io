.版本 2
.支持库 spec

.子程序 __启动窗口_创建完毕

' TCP客户端 是全局的【SunnyTCP客户端】类型，变量
TCP客户端.置缓冲区大小 (40960)
.如果真 (TCP客户端.连接 (“127.0.0.1:8888”, 到整数 (&___回调函数参考), 假, 假) ＝ 假)
    调试输出 (“连接失败”)
    返回 ()
.如果真结束
TCP客户端.发送数据 (到字节集 (“Sunny”), 5000)

.子程序 ___回调函数参考, , 公开
.参数 客户端标识, 整数型
.参数 消息类型, 整数型, , 1=接收消息 2=接收时连接被断开 3=发送时连接被断开
.参数 数据指针, 整数型, , 消息类型=2、3时 这里是错误信息
.参数 指针长度, 整数型
.局部变量 数据, 字节集

.如果真 (消息类型 ≠ 1)
    调试输出 (“断开：” ＋ 到文本 (指针到字节集 (数据指针, 指针长度)))
    返回 ()
.如果真结束
.如果真 (客户端标识 ＝ TCP客户端.取客户端标识 ())
    ' 判断数据来源
.如果真结束
数据 ＝ 指针到字节集 (数据指针, 指针长度)
调试输出 (“收到数据：”, 数据)