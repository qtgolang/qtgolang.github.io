.版本 2
.支持库 spec

.子程序 __启动窗口_创建完毕

' 该示例访问地址为
' http://127.0.0.1/index
' http://127.0.0.1/111111111111

' Sunny服务器套件 在模块中 已是全局变量 ,导入模块 可直接使用


' 添加一个 全局 路由，任何请求都会触发
Sunny服务器套件.添加全局函数 (到整数 (&全局函数))

' 无论先写404 还是先写 全局函数 都是先执行全局函数

' 当请求地址不存在时,触发404函数
Sunny服务器套件.添加404函数 (到整数 (&_404函数))

' :80代表启动的服务器端口为80
.如果 (Sunny服务器套件.启动HTTP服务器 (“:80”))
    信息框 (“服务器启动成功”, 0, , )
.否则
    信息框 (Sunny服务器套件.获取运行时的错误信息 (), #错误图标, “启动失败”, )
.如果结束


.子程序 全局函数
.参数 Context
.局部变量 SUNNY, Sunny
.局部变量 请求, Sunny请求
.局部变量 响应, Sunny响应

' 必须使用该语句取回sunny对象
SUNNY ＝ 取回sunny对象 (Context, 请求, 响应)

调试输出 (“全局函数被执行了”)

.子程序 _404函数
.参数 Context
.局部变量 SUNNY, Sunny
.局部变量 请求, Sunny请求
.局部变量 响应, Sunny响应

' 必须使用该语句取回sunny对象
SUNNY ＝ 取回sunny对象 (Context, 请求, 响应)

SUNNY.响应.写出文本 (404, “┗|｀O′|┛ 嗷~~            你访问的页面不存在...”)
调试输出 (“404函数被执行了”)